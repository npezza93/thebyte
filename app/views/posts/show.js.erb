$('#actual_post_info').html('<%= escape_javascript(render partial: 'partpost' ) %>');
history.pushState(null, null, "posts/<%= @post.id%>");
document.title = "<%= raw @post.title%>";

$('.redactor_comments').redactor(
	{ 
	  convertImageLinks: true,
	  convertVideoLinks: true,
	  imageFloatMargin: '15px',
	  linksize: 25,
	  minHeight: 150,
	  plugins: ['fontcolor', 'fontsize', 'fontfamilynew'],
	  paragraphy: false,
	  pastePlainText: true,
	  buttons: ['formatting', '|', 'bold', 'italic', 'deleted', '|', 'unorderedlist', 'orderedlist', '|', 'outdent', 'indent', , 'alignment', '|', 'image', 'video', 'fontsize', 'fontfamilynew']
	});

$('#submit_comment').on('click', function() {
	$('#submit_comment_invis').click();
});

function deletePost() {
  if(confirm('Are you sure?')) {
    window.open("<%= posts_path %>", "_self");
  }
}

$('#show_post_edit').on('click', function() {
  document.location='<%= edit_post_path(@post) %>';
});

$(window).bind("popstate", function() {
  document.getElementById('baluga2').selected=1;
  history.pushState(null, null, "/");
  document.title = "While True";
  setTimeout(function() {
    $("#post_<%= @post.id %>").find('.tint_layer').removeAttr("cross-fade", "");
    $("#post_<%= @post.id %>").find('#home_post_title').removeAttr("cross-fade-delayed", "");
    $("#post_<%= @post.id %>").find('#home_post_author').removeAttr("cross-fade-delayed", "");
    $("#posts_pagination").css("display", "none");
    var docHeight = ((document.getElementById("new_container").scrollHeight) +10) + "px"; 
    $('#posts_pagination').css("top", docHeight);
    $("#posts_pagination").fadeIn();
  }, 1000);
});

$("#home_page_back").on('click', function() { 
  document.getElementById('baluga2').selected=1;
  history.pushState(null, null, "/");
  document.title = "While True";
  setTimeout(function() {
    $("#post_<%= @post.id %>").find('.tint_layer').removeAttr("cross-fade", "");
    $("#post_<%= @post.id %>").find('#home_post_title').removeAttr("cross-fade-delayed", "");
    $("#post_<%= @post.id %>").find('#home_post_author').removeAttr("cross-fade-delayed", "");
    $("#posts_pagination").css("display", "none");
    var docHeight = ((document.getElementById("new_container").scrollHeight) +10) + "px"; 
    $('#posts_pagination').css("top", docHeight);
    $("#posts_pagination").fadeIn();
  }, 1000);
  
});