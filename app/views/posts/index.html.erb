<!-- <core-toolbar><div class="middle indent">Header</div></core-toolbar>  -->
<% content_for :title, "The Byte" %>

<% if notice %>
  <paper-toast id="toast1" class="capsule" text="<%= notice %>" style="padding-right: 60px;" duration="10000" opened responsiveWidth="300px" style="color: #eeff41;"></paper-toast>
<% end %>
<style type="text/css">
  #post_avatar {
    position: absolute;
    top:10px;
    right:130px;
  box-sizing: border-box;
    background-size: cover;
    background-repeat: no-repeat;
  display: block;
  border-radius: 50%;
  overflow: hidden;
  width: 60px;
  height:60px;
  transition: all 100ms ease;
  }
</style>
<div id="whose_logged_in">
  <% if (@user = User.find_by_id(session[:user_id])) != nil %>
    <div id="post_avatar" style="<% if (User.find_by_id(session[:user_id]).image_url) == nil%>
      background-image: url('../system/default_pic.png');
    <% else %>
      background-image: url('<%= User.find_by_id(session[:user_id]).image_url(:avatar) %>');
    <% end %>">
    </div>
    <div class="usernames" onclick="document.getElementById('overlay2').toggle()"><%= User.find_by_id(session[:user_id]).username %></div>
      <div id="logout_button">
        <paper-button id="logout_button" onclick="clicklogout()">Logout</paper-button>
      </div>
    </div>
  <%end%>
</div>

<span class="log_out_in" layout horizontal flex end-justified center>
  <% if User.find_by_id(session[:user_id]) == nil %>
        <paper-button id="login_button" onclick="openlog(1)" style="margin-right:5px;">Login</paper-button> / 
        <paper-button id="signup_button" onclick="openlog(2)" style="margin-left:5px;">signup</paper-button>
    <% end %>
    
</span>

<!-- <br>
<hr class="show_hr">  -->

<core-overlay id="overlay" backdrop transition="core-transition-center" style="background:#f5f5f5;box-sizing: border-box;-moz-box-sizing: border-box;webkit-user-select: none;-moz-user-select: none;padding:20px 20px;outline: 1px solid rgba(0,0,0,0.2);box-shadow: 0 4px 16px rgba(0,0,0,0.2);">
<div id="contentsd">
<div end-justified layout horizontal><paper-icon-button icon="clear" size="27" core-overlay-toggle></paper-icon-button></div>
    <section id="section" layout vertical>
      <paper-tabs selected="0" id="paper_tabs" onclick="papertabchange(selected)">
        <paper-tab id="paper_tab">LOGIN</paper-tab>
        <paper-tab id="paper_tab1">SIGN UP</paper-tab>
      </paper-tabs>
      <section id="section1" flex relative>
        <core-animated-pages selected="1" id="baluga" transitions="slide-from-right">
          <section id="section2">
            <%= render "sessions/login", :@user => User.new %>
            <div id="forgot_password" layout flex horizontal center-justified onclick="document.getElementById('overlay3').toggle()">Forget?</div>
                    
                    <core-overlay layered id="overlay3" class="forgot_overlay1" backdrop transition="core-transition-top">
                      <style>
                        .forgot_overlay1 {
                          box-sizing: border-box;
                          -moz-box-sizing: border-box;
                          font-family: Arial, Helvetica, sans-serif;
                          font-size: 13px;
                          -webkit-user-select: none;
                          -moz-user-select: none;
                          overflow: hidden;
                          background: #eceff1;
                          padding:30px 30px;
                          outline: 1px solid rgba(0,0,0,0.2);
                          box-shadow: 0 4px 16px rgba(0,0,0,0.2);
                        }
                        #overlay3 {
                          box-sizing: border-box;
                          text-align: center;
                          width: 250px;
                        }
                        #email_field {
                          font-family: 'Roboto', sans-serif;
                          font-size: 17px;
                          font-weight: 300;
                          margin: 0;
                          padding: 0;
                          background-color: transparent;
                          border: none;
                          outline: none;
                          margin: 10px;
                          text-align: center;
                        }
                      </style>
                        <h3 id="forgot_header">Forgot password?</h3>
                        <p>We'll email you a reset link.</p>
                        <input type="text" placeholder="Email address" id="email_field">
                        <paper-button>Submit</paper-button>
                    </core-overlay>

          </section>
          <section id="section3">
            <%= render "users/form" %>
          </section>
          <section id="section4">
      </section>
        </core-animated-pages>
      </section>
    </section>
</div>
</core-overlay>
<%= button_to 'Logout', logout_path, { :id => "logout_button_invis", method: :delete, remote: true, style: "display:none;" } %>

<core-overlay id="overlay2" backdrop transition="core-transition-center" style="background:#f5f5f5;box-sizing: border-box;-moz-box-sizing: border-box;webkit-user-select: none;-moz-user-select: none;overflow: hidden;padding:20px 20px;outline: 1px solid rgba(0,0,0,0.2);box-shadow: 0 4px 16px rgba(0,0,0,0.2);">
<div id="contentsdf">
<div end-justified layout horizontal><paper-icon-button icon="clear" size="27" core-overlay-toggle></paper-icon-button></div>
	<div id="user_overlay">
		<% if (@user = User.find_by_id(session[:user_id])) != nil %>
	   		<%= render "users/show", :@user =>  User.find_by_id(session[:user_id])%>
	   	<% end %>
   	</div>
</div>
</core-overlay>

<div id="new_post_button_container">
  <% if User.find_by_id(session[:user_id]) != nil %>
    <% if User.find_by_id(session[:user_id]).administrator %>
       <paper-fab icon="add" onclick="document.location='<%= new_post_path %>'" id="new_post_button"></paper-fab>
    <% end %>
  <% end %>
</div>


  <%= render @posts %>

  <div id="posts_pagination" >
    <%= will_paginate @posts, page_links: false  %>
  </div>


<script>
function clicklogout() {
	document.getElementById('logout_button_invis').click();
}
function openlog(which) {
	document.getElementById("overlay").toggle();
	if (which ==1) {
	document.getElementById("baluga").selected = 0;
	document.getElementById("paper_tabs").selected =0;
} else {
	document.getElementById("baluga").selected = 1;
	document.getElementById("paper_tabs").selected =1;
}
}
function papertabchange(selected){
	var sect = document.getElementById("baluga");
	var selectedTab = document.getElementById("paper_tabs").selected;
	sect.selected = selectedTab;
}
</script>